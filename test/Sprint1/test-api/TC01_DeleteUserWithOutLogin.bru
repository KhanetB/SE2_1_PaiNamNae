meta {
  name: TC01_DeleteUserWithOutLogin
  type: http
  seq: 2
}

delete {
  url: http://localhost:3000/api/user/me?permanent=true
  body: none
  auth: inherit
}

params:query {
  permanent: true
}

tests {
  test("resposne status should return unauthorized",function(){
    const status = res.getStatus();
    const expectedStatus = 400
    expect(res.getStatus()).to.equal(400);
    if (status !== expectedStatus){
      bru.runner.stopExecution();
    }
  });
  
  test("resposne body should contain", function(){
    const body = res.body()
    const message = body.message
    const expectedMessage = "Not authorized, token failed"
    expect(body).to.have.property("message")
    expect(message).to.equal(expectedMessage)
    if(message !== expectedMessage){
      bru.runner.stopExecution();
    }
  });
  
  // bru.setNextRequest("TC02_CreateUser");
}

settings {
  encodeUrl: true
  timeout: 0
}
