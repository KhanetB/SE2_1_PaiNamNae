meta {
  name: TC02_CreateUser
  type: http
  seq: 3
}

post {
  url: http://localhost:3000/api/users
  body: multipartForm
  auth: inherit
}

headers {
  Accept: application/json
  Content-Type: multipart/form-data
}

body:multipart-form {
  email: test@gmail.com
  username: testUser
  password: 123456789
  firstName: Test
  lastName: User
  phoneNumber: 08123456789
  gender: MALE
  nationalIdNumber: 9351407024077
  nationalIdExpiryDate: 2030-12-31T00:00:00.000Z
  nationalIdPhotoUrl: @file(person.jpg) @contentType(image/jpeg)
  selfiePhotoUrl: @file(person.jpg) @contentType(image/jpeg)
}

tests {
  test("resposne status should return 201 Created", function(){
    const status = res.getStatus()
    console.log(res.getBody())
    const expectedStatus = 201
    expect(status).to.equal(expectedStatus);
    if (status !== expectedStatus){
      bru.runner.stopExecution();
    }
  });
  
  // bru.setNextRequest("TC03_Login");
}

settings {
  encodeUrl: true
  timeout: 0
}
